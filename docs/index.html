<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Fun Promises API</title>
	<meta name="description" content="Documentation for Fun Promises API">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">Fun Promises API</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1>Fun Promises API</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<!-- @format -->
				<a href="#fun-promises" id="fun-promises" style="color: inherit; text-decoration: none;">
					<h1>fun-promises</h1>
				</a>
				<a href="#a-library-for-making-promises-more-friendly-fluent-and-functional" id="a-library-for-making-promises-more-friendly-fluent-and-functional" style="color: inherit; text-decoration: none;">
					<h2>A library for making Promises more friendly, fluent, and fun(ctional).</h2>
				</a>
				<a href="#install" id="install" style="color: inherit; text-decoration: none;">
					<h3>Install</h3>
				</a>
				<a href="#yarn" id="yarn" style="color: inherit; text-decoration: none;">
					<h4>Yarn</h4>
				</a>
				<pre><code>yarn add <span class="hljs-function"><span class="hljs-keyword">fun</span>-promises</span></code></pre>
				<a href="#npm" id="npm" style="color: inherit; text-decoration: none;">
					<h4>npm</h4>
				</a>
				<pre><code>npm install --save <span class="hljs-function"><span class="hljs-keyword">fun</span>-promises</span></code></pre>
				<a href="#cdn-for-browsers" id="cdn-for-browsers" style="color: inherit; text-decoration: none;">
					<h4>CDN for Browsers</h4>
				</a>
				<p>The following URL contains a script which will set the <code>FunPromise</code> global to be
					an object containing the various exports of
				<a href="https://robertfischer.github.io/fun-promises/modules/_index_.html"><code>index.ts</code></a>.</p>
				<pre><code>https:<span class="hljs-regexp">//u</span>npkg.com<span class="hljs-regexp">/browse/</span>fun-promises@latest<span class="hljs-regexp">/dist/</span>browser/index.js</code></pre>
				<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
					<h3>Usage</h3>
				</a>
				<a href="#es-modules" id="es-modules" style="color: inherit; text-decoration: none;">
					<h4>ES Modules</h4>
				</a>
				<pre><code><span class="hljs-keyword">import</span> FunPromise <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;fun-promises&quot;</span>;</code></pre>
				<a href="#cjs" id="cjs" style="color: inherit; text-decoration: none;">
					<h4>CJS</h4>
				</a>
				<pre><code><span class="hljs-keyword">const</span> { FunPromise } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;fun-promises&quot;</span>);</code></pre>
				<a href="#what-this-is-not" id="what-this-is-not" style="color: inherit; text-decoration: none;">
					<h3>What This Is Not</h3>
				</a>
				<p>This is <em>not</em> an implementation of <a href="https://promisesaplus.com/">Promises/A+</a>. It
					is not a polyfill or a <a href="https://github.com/sindresorhus/ponyfill">ponyfill</a>. In
					fact, it assumes that you have <code>Promise</code> available as a global, either through a
				polyfill or natively.</p>
				<a href="#what-this-is" id="what-this-is" style="color: inherit; text-decoration: none;">
					<h3>What This Is</h3>
				</a>
				<p>This is a library that extends the native <code>Promise</code> implementation with a number
					of useful utilities, so that your code is faster and easier. It is inspired by
					libraries like <a href="http://bluebirdjs.com/"><code>bluebird</code></a> and
					<a href="https://github.com/tildeio/rsvp.js/blob/master/README.md"><code>rsvp.js</code></a>, except
					without the overhead of providing its own <code>Promise</code> implementation. Native
					promises have been competitive in performance since Node 10
					(<a href="https://www.npmjs.com/package/bluebird#note">even <code>bluebird</code> says so</a>) but
					there&#39;s a lot of functionality which native <code>Promises</code> don&#39;t supply. Fun
				Promises gives you that better API without the overhead.</p>
				<a href="#api" id="api" style="color: inherit; text-decoration: none;">
					<h3>API</h3>
				</a>
				<ul>
					<li><a href="http://robertfischer.github.io/fun-promises/classes/_src_fun_promise_.funpromise.html">FunPromise</a></li>
					<li><a href="http://robertfischer.github.io/fun-promises/modules/_src_deferral_.deferral.html">Deferral</a></li>
					<li><a href="http://robertfischer.github.io/fun-promises/modules/_src_types_.html">Types</a></li>
				</ul>
				<p>You also may want to check out
					<a href="http://robertfischer.github.io/fun-promises/test-results.txt">the BDD spec</a>,
				which gives an overview of how we expect these things to work.</p>
				<a href="#some-highlights" id="some-highlights" style="color: inherit; text-decoration: none;">
					<h3>Some Highlights</h3>
				</a>
				<a href="#deferral-class" id="deferral-class" style="color: inherit; text-decoration: none;">
					<h4><code>Deferral</code> class</h4>
				</a>
				<p>This is an inside-out promise: it gives you access to the <code>resolve</code> and <code>reject</code>
					methods of the promise so that you can perform operations on them later, as well
				as having accessor to query the state of <code>promise</code>.</p>
				<a href="#try" id="try" style="color: inherit; text-decoration: none;">
					<h4><code>try</code></h4>
				</a>
				<pre><code class="language-typescript">FunPromise.try(<span class="hljs-function">() =&gt;</span> doSomething(explosivelyFailingParamCalculation()));
FunPromise.try(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">/* do stuff */</span> <span class="hljs-keyword">await</span> something; <span class="hljs-comment">/* do more stuff */</span>
});</code></pre>
				<p>Wrap your execution in a promise, so that even its invocation
					<a href="https://blog.izs.me/2013/08/designing-apis-for-asynchrony">won&#39;t release Zalgo</a>,
				or as a convinent way to build a <code>FunPromise</code> off of an <code>async</code> function.</p>
				<a href="#tap" id="tap" style="color: inherit; text-decoration: none;">
					<h4><code>tap</code></h4>
				</a>
				<pre><code class="language-typescript">someExpensiveOperation()
    .tap(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> debug(<span class="hljs-string">&quot;Value from someExpensiveOperation&quot;</span>, value))
    .then(<span class="hljs-comment">/* ... */</span>);</code></pre>
				<p>This lets you take a look at a resolved value without risking changing it. This
				is extremely useful for debugging log messages.</p>
				<a href="#race" id="race" style="color: inherit; text-decoration: none;">
					<h4><code>race</code></h4>
				</a>
				<pre><code class="language-typescript">getRelatedShows().race(<span class="hljs-function">(<span class="hljs-params">someShow</span>) =&gt;</span> renderSuggestedShow(someShow));</code></pre>
				<p>Fire off a bunch of promises and return whichever one resolves first. (The
				results of any later-resolving promises are discarded.)</p>
				<a href="#coalesce" id="coalesce" style="color: inherit; text-decoration: none;">
					<h4><code>coalesce</code></h4>
				</a>
				<pre><code class="language-typescript">FunPromise.coalesce([
    lookupUserInMemoryCache,
    lookupUserInRedisCache,
    lookupUserInDB,
]).then(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> renderUserData(data));</code></pre>
				<p>Given a bunch of functions that return either values or promises of values,
				execute them sequentially and return the first one what resolves.</p>
				<a href="#types" id="types" style="color: inherit; text-decoration: none;">
					<h4>Types</h4>
				</a>
				<p>There are types that represent unwrapped promise values
					(<a href="https://robertfischer.github.io/fun-promises/modules/_src_types_.html#unpromise"><code>Unpromise</code></a>),
					things that may be promises or values
					(<a href="https://robertfischer.github.io/fun-promises/modules/_src_types_.html#promisable"><code>Promisable</code></a>),
					and
				<a href="https://robertfischer.github.io/fun-promises/modules/_src_types_.html">a few others that are a lot more esoteric</a>.</p>
				<p><em>NOTE</em>: Compiling these types requires a recent version of TypeScript (4.1 or
					greater) due to conditional recursive types being unavailable in 3.x and buggy
				in 4.0.x.</p>
				<a href="#distributions" id="distributions" style="color: inherit; text-decoration: none;">
					<h3>Distributions</h3>
				</a>
				<p>By default, your packager should automatically grab the appropriate distribution
					through the <code>package.json</code> configuration within this library. If you&#39;re curious
					or if you have a weird use case, then each distribution has a few different
					flavors of the codebase to choose from. These all live under the <code>./dist</code>
				directory.</p>
				<a href="#esnext" id="esnext" style="color: inherit; text-decoration: none;">
					<h4>ESNext</h4>
				</a>
				<p>Within <code>./dist/esnext</code> is the result of the Typescript compilation with the
					<a href="https://www.typescriptlang.org/tsconfig#module">&quot;ESNext&quot; <code>module</code> setting</a> and
					the <a href="https://www.typescriptlang.org/tsconfig#target">&quot;ESNext&quot; <code>target</code> setting</a>.
					Note that it is subject to change as new ECMAScript standards are put out and
					Typescript&#39;s JavaScript generation continues to catch up to them, and mostly
				exists for developers to see code that results from compilation.</p>
				<a href="#es6" id="es6" style="color: inherit; text-decoration: none;">
					<h4>ES6</h4>
				</a>
				<p>Within <code>./dist/es6</code> are the folders <code>amd</code>, <code>umd</code>, <code>cjs</code> (CommonJS), and <code>esm</code>
					(ECMAScript Modules). These contain the result of the Typescript compilation
					with the corresponding
					<a href="https://www.typescriptlang.org/tsconfig#module"><code>module</code> setting</a> and the
				<a href="https://www.typescriptlang.org/tsconfig#target">&quot;ES6&quot; <code>target</code> setting</a>.</p>
				<p>The only single-file distribution is the <code>es6/amd</code> distribution.</p>
				<a href="#node" id="node" style="color: inherit; text-decoration: none;">
					<h4>Node</h4>
				</a>
				<p>Within <code>./dist/node</code> are the folders <code>v10</code>, <code>v12</code>, <code>v14</code>, each of which
					containing the Typescript compilation based on
					<a href="https://github.com/tsconfig/bases#node-10-tsconfigjson">the recommended <code>tsconfig.json</code> configs</a>.
					for those environments. All the versions are the exact same code as of this
				writing, so we default Node to using <code>node/v14</code>.</p>
				<a href="#browser" id="browser" style="color: inherit; text-decoration: none;">
					<h4>Browser</h4>
				</a>
				<p>The file at <code>./dist/browser/index.js</code> is the result of transpiling the result of
					the <code>ESNext</code> code above using <a href="http://parceljs.org/">Parcel</a>. The result is a
					single minified file, appropriate for use in a CDN. It exposes the module under
				the global <code>FunPromise</code> namespace.</p>
				<a href="#react-native" id="react-native" style="color: inherit; text-decoration: none;">
					<h4>React Native</h4>
				</a>
				<p>Within <code>./dist/react-native</code> is the result of transpiling the result with
					<a href="https://github.com/tsconfig/bases#react-native-tsconfigjson">the recommended <code>tsconfig.json</code> configs</a>
					for React Native. The distribution is specified in <code>package.json</code> under the
					<code>&quot;reactNative&quot;</code> key,
				<a href="https://facebook.github.io/metro/docs/configuration/#resolvermainfields">which you can configure Metro to prefer</a>.</p>
				<a href="#documentation" id="documentation" style="color: inherit; text-decoration: none;">
					<h3>Documentation</h3>
				</a>
				<p>The full documentation (including this content) is available on
				<a href="https://robertfischer.github.io/fun-promises/">GitHub Pages</a>.</p>
				<a href="#specifications" id="specifications" style="color: inherit; text-decoration: none;">
					<h4>Specifications</h4>
				</a>
				<p>Our test specs are
				<a href="https://robertfischer.github.io/fun-promises/test-results.txt">published here</a>.</p>
				<a href="#contributing--todo-" id="contributing--todo-" style="color: inherit; text-decoration: none;">
					<h3>Contributing [ TODO ]</h3>
				</a>
				<a href="#design-philosophy--todo-" id="design-philosophy--todo-" style="color: inherit; text-decoration: none;">
					<h4>Design Philosophy [ TODO ]</h4>
				</a>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_index_.html">&quot;index&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_src_deferral_.html">&quot;src/deferral&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_src_fun_promise_.html">&quot;src/fun-<wbr>promise&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_src_types_.html">&quot;src/types&quot;</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>