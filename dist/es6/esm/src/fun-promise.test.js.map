{"version":3,"file":"fun-promise.test.js","sourceRoot":"","sources":["../../../../src/fun-promise.test.js"],"names":[],"mappings":"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","sourcesContent":["/** @format */\n\nimport FunPromise from \"./fun-promise\";\nimport _ from \"lodash\";\nimport { NestedError } from \"ts-nested-error\";\nimport { Fulfillment, Rejection } from \"./types\";\n\nconst tokenPromise = new Promise((resolve) => resolve(true));\nconst tokenFunPromise = new FunPromise(tokenPromise);\n\nfunction withRejection(rejectionReason, callback) {\n\tconst rejection = Promise.reject(rejectionReason);\n\ttry {\n\t\treturn callback(rejection);\n\t} finally {\n\t\trejection.catch(_.noop); // Disable uncaught exception issues\n\t}\n}\n\ndescribe(\"FunPromise\", () => {\n\tit(\"can be constructed and resolved\", async () => {\n\t\tawait expect(new FunPromise(tokenPromise)).resolves.toBe(true);\n\t});\n\n\tdescribe(\"resolve/return\", () => {\n\t\t_.forEach(\n\t\t\t{ static: FunPromise, instance: tokenFunPromise },\n\t\t\t(impl, implName) => {\n\t\t\t\t_.forEach([\"resolve\", \"return\"], (methodName) => {\n\t\t\t\t\tdescribe(methodName, () => {\n\t\t\t\t\t\tdescribe(implName, () => {\n\t\t\t\t\t\t\tfunction doResolve(value) {\n\t\t\t\t\t\t\t\treturn impl[methodName](value);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tit(\"rejects when provided a rejection\", async () => {\n\t\t\t\t\t\t\t\tawait expect(doResolve(Promise.reject(\"BOOM!\"))).rejects.toBe(\n\t\t\t\t\t\t\t\t\t\"BOOM!\"\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tit(\"does not resolve the elements of an array\", async () => {\n\t\t\t\t\t\t\t\texpect.hasAssertions();\n\t\t\t\t\t\t\t\tawait withRejection(\"BOOM!\", async (rejection) => {\n\t\t\t\t\t\t\t\t\tawait expect(doResolve([rejection])).resolves.toHaveLength(1);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tdescribe(\"resolves correctly\", () => {\n\t\t\t\t\t\t\t\tit(\"with a value\", async () => {\n\t\t\t\t\t\t\t\t\tawait expect(doResolve(tokenPromise)).resolves.toBe(true);\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tit(\"returns the FunPromise if passed a FunPromise\", () => {\n\t\t\t\t\t\t\t\t\texpect(doResolve(tokenFunPromise)).toEqual(tokenFunPromise);\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tit(\"without a value\", async () => {\n\t\t\t\t\t\t\t\t\tawait expect(doResolve()).resolves.toBeNil();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t});\n\n\tdescribe(\"then\", () => {\n\t\tit(\"works without onrejected\", async () => {\n\t\t\tawait expect(tokenFunPromise.then(_.identity)).resolves.toBe(true);\n\t\t});\n\t});\n\n\tdescribe(\"catch\", () => {\n\t\tit(\"handles rejections\", async () => {\n\t\t\tawait expect(\n\t\t\t\ttokenFunPromise\n\t\t\t\t\t.then(() => Promise.reject(\"BOOM!\"))\n\t\t\t\t\t.catch((e) => {\n\t\t\t\t\t\texpect(e).toBe(\"BOOM!\");\n\t\t\t\t\t\treturn \"DONE!\";\n\t\t\t\t\t})\n\t\t\t).resolves.toBe(\"DONE!\");\n\t\t});\n\n\t\tit(\"returns the error when not passed an argument\", async () => {\n\t\t\tconst error = new Error(\"BOOM!\");\n\t\t\tawait expect(\n\t\t\t\ttokenFunPromise.then(() => Promise.reject(error)).catch()\n\t\t\t).resolves.toBe(error);\n\t\t});\n\t});\n\n\tdescribe(\"arrayify\", () => {\n\t\tit(\"basically works\", async () => {\n\t\t\tconst value = [1, 2, 3, 4];\n\t\t\tawait expect(FunPromise.resolve(value).arrayify()).resolves.toStrictEqual(\n\t\t\t\tvalue\n\t\t\t);\n\t\t});\n\n\t\tit(\"returns a clone\", async () => {\n\t\t\tconst value = [1, 2, 3, 4];\n\t\t\tawait expect(\n\t\t\t\tFunPromise.resolve(value)\n\t\t\t\t\t.arrayify()\n\t\t\t\t\t.then((it) => {\n\t\t\t\t\t\tit.pop();\n\t\t\t\t\t\treturn it;\n\t\t\t\t\t})\n\t\t\t).resolves.not.toBe(value);\n\t\t\texpect(value).toHaveLength(4);\n\t\t});\n\n\t\tit(\"does not resolve values when called without an argument\", async () => {\n\t\t\tconst rejection = Promise.reject(\"BOOM!\");\n\t\t\ttry {\n\t\t\t\tawait expect(\n\t\t\t\t\tFunPromise.resolve([1, 2, rejection]).arrayify()\n\t\t\t\t).resolves.toBeArrayOfSize(3);\n\t\t\t} finally {\n\t\t\t\trejection.catch((e) => {}); // Disarm the rejection\n\t\t\t}\n\t\t});\n\n\t\tit(\"resolves values when called with the sole argument `true`\", async () => {\n\t\t\tawait expect(\n\t\t\t\tFunPromise.resolve([\n\t\t\t\t\tPromise.resolve(1),\n\t\t\t\t\tFunPromise.resolve(2),\n\t\t\t\t]).arrayify(true)\n\t\t\t).resolves.toEqual([1, 2]);\n\t\t});\n\n\t\tit(\"rejects values when called with the sole argument `true` and a rejection in the mix\", async () => {\n\t\t\tconst rejection = Promise.reject(\"BOOM!\");\n\t\t\tawait expect(\n\t\t\t\tFunPromise.resolve([1, 2, rejection]).arrayify(true)\n\t\t\t).rejects.toBe(\"BOOM!\");\n\t\t});\n\n\t\tit(\"rejects values in order when called with the arguments `(true, true)`\", async () => {\n\t\t\tconst rejection1 = Promise.reject(\"BOOM!\");\n\t\t\tconst rejection2 = Promise.reject(\"BANG!\");\n\t\t\ttry {\n\t\t\t\tawait expect(\n\t\t\t\t\tFunPromise.resolve([1, 2, rejection1, rejection2]).arrayify(\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t)\n\t\t\t\t).rejects.toBe(\"BOOM!\");\n\t\t\t} finally {\n\t\t\t\trejection1.catch((e) => {}); // Disarm the rejection\n\t\t\t\trejection2.catch((e) => {}); // Disarm the rejection\n\t\t\t}\n\t\t});\n\n\t\tit(\"resolves values in order when called with the arguments `(true, true)`\", async () => {\n\t\t\tlet sawFirst = false;\n\t\t\tlet sawSecond = false;\n\t\t\tlet sawThird = false;\n\t\t\tlet sawFourth = false;\n\t\t\tawait expect(\n\t\t\t\tFunPromise.resolve([\n\t\t\t\t\tFunPromise.try(() => {\n\t\t\t\t\t\texpect(sawFirst).toBe(false);\n\t\t\t\t\t\texpect(sawSecond).toBe(false);\n\t\t\t\t\t\texpect(sawThird).toBe(false);\n\t\t\t\t\t\texpect(sawFourth).toBe(false);\n\t\t\t\t\t\tsawFirst = true;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}),\n\t\t\t\t\tFunPromise.try(() => {\n\t\t\t\t\t\texpect(sawFirst).toBe(true);\n\t\t\t\t\t\texpect(sawSecond).toBe(false);\n\t\t\t\t\t\texpect(sawThird).toBe(false);\n\t\t\t\t\t\texpect(sawFourth).toBe(false);\n\t\t\t\t\t\tsawSecond = true;\n\t\t\t\t\t\treturn 2;\n\t\t\t\t\t}),\n\t\t\t\t\tFunPromise.try(() => {\n\t\t\t\t\t\texpect(sawFirst).toBe(true);\n\t\t\t\t\t\texpect(sawSecond).toBe(true);\n\t\t\t\t\t\texpect(sawThird).toBe(false);\n\t\t\t\t\t\texpect(sawFourth).toBe(false);\n\t\t\t\t\t\tsawThird = true;\n\t\t\t\t\t\treturn 3;\n\t\t\t\t\t}),\n\t\t\t\t\tFunPromise.try(() => {\n\t\t\t\t\t\texpect(sawFirst).toBe(true);\n\t\t\t\t\t\texpect(sawSecond).toBe(true);\n\t\t\t\t\t\texpect(sawThird).toBe(true);\n\t\t\t\t\t\texpect(sawFourth).toBe(false);\n\t\t\t\t\t\tsawFourth = true;\n\t\t\t\t\t\treturn 4;\n\t\t\t\t\t}),\n\t\t\t\t]).arrayify(true, true)\n\t\t\t).resolves.toStrictEqual([1, 2, 3, 4]);\n\t\t\texpect(sawFirst).toBe(true);\n\t\t\texpect(sawSecond).toBe(true);\n\t\t\texpect(sawThird).toBe(true);\n\t\t\texpect(sawFourth).toBe(true);\n\t\t});\n\t});\n\n\tdescribe(\"all\", () => {\n\t\t_.forEach([true, false], (staticVersion) => {\n\t\t\tdescribe(staticVersion ? \"static\" : \"instance\", () => {\n\t\t\t\tdescribe(\"basically works\", () => {\n\t\t\t\t\t_.times(10, (argCount) => {\n\t\t\t\t\t\tconst simpleArgs = _.times(argCount, (i) => 2 ** i);\n\n\t\t\t\t\t\tfunction runAll(args) {\n\t\t\t\t\t\t\tif (staticVersion) {\n\t\t\t\t\t\t\t\treturn FunPromise.all(args);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn FunPromise.resolve(args).all();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tit(`for ${argCount} arguments`, async () => {\n\t\t\t\t\t\t\tawait expect(runAll(simpleArgs)).resolves.toStrictEqual(\n\t\t\t\t\t\t\t\tsimpleArgs\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe(\"try\", () => {\n\t\tit(\"basically works\", async () => {\n\t\t\tawait expect(FunPromise.try(() => true)).resolves.toBe(true);\n\t\t});\n\n\t\tit(\"works with one argument\", async () => {\n\t\t\tawait expect(FunPromise.try((i) => i, 42)).resolves.toBe(42);\n\t\t});\n\n\t\tit(\"explodes properly\", async () => {\n\t\t\tawait expect(FunPromise.try(() => Promise.reject(\"BOOM!\"))).rejects.toBe(\n\t\t\t\t\"BOOM!\"\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe(\"map\", () => {\n\t\t_.forEach([true, false], (staticVersion) => {\n\t\t\tdescribe(staticVersion ? \"static\" : \"instance\", () => {\n\t\t\t\tfunction runMap(args, mapper) {\n\t\t\t\t\tif (staticVersion) {\n\t\t\t\t\t\treturn FunPromise.map(args, mapper);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn FunPromise.resolve(args).map(mapper);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tit(\"basically works\", async () => {\n\t\t\t\t\tawait expect(\n\t\t\t\t\t\trunMap([\"Hello\", \"Goodbye\"], (it) => `${it}, World!`)\n\t\t\t\t\t).resolves.toStrictEqual([\"Hello, World!\", \"Goodbye, World!\"]);\n\t\t\t\t});\n\n\t\t\t\tit(\"works with some test values\", async () => {\n\t\t\t\t\tconst defaultValues = [1, 2, 4, 8, 16];\n\t\t\t\t\tconst defaultMapper = (it) => {\n\t\t\t\t\t\tif (Math.random() < 0.5) {\n\t\t\t\t\t\t\treturn Promise.resolve(it * 2);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn it * 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tawait expect(\n\t\t\t\t\t\trunMap(defaultValues, defaultMapper)\n\t\t\t\t\t).resolves.toStrictEqual([2, 4, 8, 16, 32]);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe(\"Symbol.toStringTag\", () => {\n\t\tit(\"is the same as the promise passed in\", () => {\n\t\t\tconst promise = new Promise((resolve) => resolve());\n\t\t\tconst promiseTag = promise[Symbol.toStringTag];\n\t\t\texpect(promiseTag).not.toBeNil();\n\t\t\texpect(new FunPromise(promise)[Symbol.toStringTag]).toBe(promiseTag);\n\t\t});\n\t});\n\n\tdescribe(\"finally\", () => {\n\t\tit(\"returns the same promise when given no arguments\", () => {\n\t\t\texpect(tokenFunPromise.finally()).toBe(tokenFunPromise);\n\t\t});\n\n\t\tit(\"executes on resolution\", async () => {\n\t\t\tlet finallyExecuted = false;\n\t\t\tawait expect(\n\t\t\t\tFunPromise.resolve(false).finally(() => {\n\t\t\t\t\tfinallyExecuted = true;\n\t\t\t\t})\n\t\t\t).resolves.toBe(false);\n\t\t\texpect(finallyExecuted).toBe(true);\n\t\t});\n\n\t\tit(\"executes on rejection\", async () => {\n\t\t\tlet finallyExecuted = false;\n\t\t\tawait expect(\n\t\t\t\tFunPromise.reject(\"BOOM!\").finally(() => {\n\t\t\t\t\tfinallyExecuted = true;\n\t\t\t\t})\n\t\t\t).rejects.toBe(\"BOOM!\");\n\t\t\texpect(finallyExecuted).toBe(true);\n\t\t});\n\t});\n\n\tdescribe(\"reject\", () => {\n\t\t_.forEach(\n\t\t\t{ static: FunPromise, instance: tokenFunPromise },\n\t\t\t(impl, name) => {\n\t\t\t\tdescribe(name, () => {\n\t\t\t\t\tit(\"rejects correctly\", async () => {\n\t\t\t\t\t\tawait expect(impl.reject(true)).rejects.toBe(true);\n\t\t\t\t\t});\n\n\t\t\t\t\tit(\"doesn't change the object that is rejected\", async () => {\n\t\t\t\t\t\tconst reason = { foo: true, bar: 42 };\n\t\t\t\t\t\tawait expect(impl.reject(reason)).rejects.toBe(reason);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t});\n\n\tdescribe(\"coalesce\", () => {\n\t\tfunction runCoalesce(args, test) {\n\t\t\treturn FunPromise.coalesce(args, test);\n\t\t}\n\n\t\tit(\"basically works\", async () => {\n\t\t\tawait expect(\n\t\t\t\trunCoalesce([() => null, Promise.resolve(() => true)])\n\t\t\t).resolves.toBe(true);\n\t\t});\n\n\t\tit(\"returns the first resolving value\", async () => {\n\t\t\tawait expect(\n\t\t\t\trunCoalesce([() => FunPromise.delay(1000).resolve(true), () => false])\n\t\t\t).resolves.toBe(false);\n\t\t});\n\n\t\tit(\"returns the value that passes the test\", async () => {\n\t\t\tawait expect(\n\t\t\t\trunCoalesce([() => 2, () => 4], (it) => it > 2)\n\t\t\t).resolves.toBe(4);\n\t\t});\n\n\t\tit(\"throws the error if nothing passes the test\", async () => {\n\t\t\tawait expect(\n\t\t\t\trunCoalesce([() => Promise.reject(\"BOOM!\"), () => 4], (it) => it > 4)\n\t\t\t).rejects.toBe(\"BOOM!\");\n\t\t});\n\n\t\tit(\"punts appropriately after the first resolution\", async () => {\n\t\t\tawait expect(runCoalesce(_.times(3, (idx) => () => idx))).resolves.toBe(\n\t\t\t\t0\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe(\"delay\", () => {\n\t\t_.forEach([true, false], (staticVersion) => {\n\t\t\tdescribe(staticVersion ? \"static\" : \"instance\", () => {\n\t\t\t\t_.forEach([-1000, -1, 0, 1, 1000], (delayMs) => {\n\t\t\t\t\tdescribe(`When requesting a delay of ${delayMs} milliseconds`, () => {\n\t\t\t\t\t\tfunction runDelay(arg) {\n\t\t\t\t\t\t\tif (staticVersion) {\n\t\t\t\t\t\t\t\treturn FunPromise.delay(delayMs, arg);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn FunPromise.resolve().delay(delayMs, arg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdescribe(\"basically works\", () => {\n\t\t\t\t\t\t\tit(\"with no arg\", async () => {\n\t\t\t\t\t\t\t\tawait expect(runDelay()).resolves;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tit(\"with one arg\", async () => {\n\t\t\t\t\t\t\t\tawait expect(runDelay(1000)).resolves.toBe(1000);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe(\"simplify\", () => {\n\t\tit(\"basically works\", async () => {\n\t\t\tawait expect(\n\t\t\t\tnew FunPromise(Promise.resolve(Promise.resolve(true))).simplify()\n\t\t\t).resolves.toBe(true);\n\t\t});\n\t});\n\n\tdescribe(\"filter\", () => {\n\t\t_.forEach([true, false], (staticVersion) => {\n\t\t\tdescribe(staticVersion ? \"static\" : \"instance\", () => {\n\t\t\t\tconst defaultValues = [\n\t\t\t\t\t1,\n\t\t\t\t\ttrue,\n\t\t\t\t\t{},\n\t\t\t\t\tnull,\n\t\t\t\t\tPromise.resolve(null),\n\t\t\t\t\tPromise.resolve(),\n\t\t\t\t\t\"Hello, Dolly!\",\n\t\t\t\t];\n\t\t\t\tconst defaultExpect = [1, true, {}, \"Hello, Dolly!\"];\n\t\t\t\tconst defaultTest = (it) => !_.isNil(it);\n\t\t\t\tfunction doFilter(values = defaultValues, test = defaultTest) {\n\t\t\t\t\tif (staticVersion) {\n\t\t\t\t\t\treturn FunPromise.filter(values, test);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn FunPromise.resolve(values).filter(test);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tit(\"basically works\", async () => {\n\t\t\t\t\tawait expect(doFilter()).resolves.not.toBeEmpty();\n\t\t\t\t\tawait expect(doFilter()).resolves.toBeArrayOfSize(4);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe(\"flatMap\", () => {\n\t\t_.forEach([true, false], (staticVersion) => {\n\t\t\tdescribe(staticVersion ? \"static\" : \"instance\", () => {\n\t\t\t\tconst defaultValues = [\n\t\t\t\t\t1,\n\t\t\t\t\ttrue,\n\t\t\t\t\t{},\n\t\t\t\t\tnull,\n\t\t\t\t\tPromise.resolve(null),\n\t\t\t\t\tPromise.resolve(),\n\t\t\t\t\t\"Hello, Dolly!\",\n\t\t\t\t];\n\t\t\t\tconst defaultMapper = (it) => {\n\t\t\t\t\tif (_.isNil(it)) {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn [it];\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tconst defaultExpect = [1, true, {}, \"Hello, Dolly!\"];\n\t\t\t\tfunction doFlatMap(values = defaultValues, mapper = defaultMapper) {\n\t\t\t\t\tif (staticVersion) {\n\t\t\t\t\t\treturn FunPromise.flatMap(values, mapper);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn FunPromise.resolve(values).flatMap(mapper);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tit(\"basically works\", async () => {\n\t\t\t\t\tawait expect(doFlatMap()).resolves.toStrictEqual(defaultExpect);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe(\"tap\", () => {\n\t\tit(\"basically works\", async () => {\n\t\t\tlet sawTap = false;\n\t\t\tawait expect(\n\t\t\t\ttokenFunPromise.tap((val) => {\n\t\t\t\t\texpect(val).toBe(true);\n\t\t\t\t\tsawTap = true;\n\t\t\t\t\treturn false;\n\t\t\t\t})\n\t\t\t).resolves.toBe(true);\n\t\t\texpect(sawTap).toBe(true);\n\t\t});\n\n\t\tit(\"rejects if it throws an exception\", async () => {\n\t\t\tlet sawTap = false;\n\t\t\tawait expect(\n\t\t\t\ttokenFunPromise.tap((val) => {\n\t\t\t\t\tsawTap = true;\n\t\t\t\t\tthrow \"BOOM!\";\n\t\t\t\t})\n\t\t\t).rejects.toBe(\"BOOM!\");\n\t\t\texpect(sawTap).toBe(true);\n\t\t});\n\t});\n\n\tdescribe(\"fold\", () => {\n\t\t_.forEach([true, false], (staticVersion) => {\n\t\t\tdescribe(staticVersion ? \"static\" : \"instance\", () => {\n\t\t\t\tconst defaultValues = [1, 2, 3, 4, 5];\n\n\t\t\t\tfunction doFold(\n\t\t\t\t\tvalues = defaultValues,\n\t\t\t\t\tinitialValue = 0,\n\t\t\t\t\taccumulator = (a, b) => a + b\n\t\t\t\t) {\n\t\t\t\t\tif (staticVersion) {\n\t\t\t\t\t\treturn FunPromise.fold(values, initialValue, accumulator);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn FunPromise.resolve(values).fold(initialValue, accumulator);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tit(\"basically works\", async () => {\n\t\t\t\t\tconst values = [1, 2, 3, 4, 5];\n\t\t\t\t\tawait expect(doFold()).resolves.toBe(1 + 2 + 3 + 4 + 5);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe(\"tapCatch\", () => {\n\t\tit(\"basically works\", async () => {\n\t\t\tlet sawTapCatch = false;\n\t\t\tawait expect(\n\t\t\t\tFunPromise.reject(\"BOOM!\").tapCatch((e) => {\n\t\t\t\t\tsawTapCatch = true;\n\t\t\t\t\texpect(e).toBe(\"BOOM!\");\n\t\t\t\t\treturn \"BANG!\";\n\t\t\t\t})\n\t\t\t).rejects.toBe(\"BOOM!\");\n\t\t\texpect(sawTapCatch).toBe(true);\n\t\t});\n\n\t\tit(\"nests explosions\", async () => {\n\t\t\tlet sawCatch = false;\n\t\t\tconst err1 = new Error(\"BOOM!\");\n\t\t\tconst err2 = new Error(\"BANG!\");\n\t\t\tawait expect(\n\t\t\t\tFunPromise.reject(err1)\n\t\t\t\t\t.tapCatch((e) => {\n\t\t\t\t\t\tthrow err2;\n\t\t\t\t\t})\n\t\t\t\t\t.catch((e) => {\n\t\t\t\t\t\tsawCatch = true;\n\t\t\t\t\t\texpect(e).toBeInstanceOf(NestedError);\n\t\t\t\t\t\texpect(e).toHaveProperty(\"message\", \"Error thrown in 'tapCatch'\");\n\t\t\t\t\t\texpect(e).toHaveProperty(\"innerErrors\");\n\t\t\t\t\t\texpect(e.innerErrors).toHaveLength(2);\n\t\t\t\t\t\texpect(e.innerErrors).toEqual([err1, err2]);\n\t\t\t\t\t\treturn \"Hello!\";\n\t\t\t\t\t})\n\t\t\t).resolves.toBe(\"Hello!\");\n\t\t\texpect(sawCatch).toBe(true);\n\t\t});\n\t});\n\n\tdescribe(\"tapEach\", () => {\n\t\tit(\"basically works\", async () => {\n\t\t\tconst values = [\n\t\t\t\t123,\n\t\t\t\tPromise.resolve(true),\n\t\t\t\t\"Hello, Dolly!\",\n\t\t\t\tnull,\n\t\t\t\tundefined,\n\t\t\t];\n\t\t\tconst funPromise = FunPromise.resolve(values);\n\t\t\tlet count = 0;\n\t\t\tawait expect(\n\t\t\t\tfunPromise.tapEach(() => {\n\t\t\t\t\tcount++;\n\t\t\t\t})\n\t\t\t).resolves.toEqual(await Promise.all(values));\n\t\t\texpect(count).toBe(values.length);\n\t\t});\n\t});\n\n\tdescribe(\"wrapError\", () => {\n\t\tit(\"basically works\", async () => {\n\t\t\tconst reason = \"BOOM!\";\n\t\t\tawait expect(\n\t\t\t\tFunPromise.reject(reason).wrapError(\"BANG!\")\n\t\t\t).rejects.toHaveProperty(\"message\", \"BANG!\");\n\t\t\tawait expect(\n\t\t\t\tFunPromise.reject(reason).wrapError(\"BANG!\")\n\t\t\t).rejects.toHaveProperty(\"innerError\");\n\t\t});\n\t});\n\n\tdescribe(\"wrapErrors\", () => {\n\t\tit(\"basically works\", async () => {\n\t\t\tconst err1 = new Error(\"BOOM!\");\n\t\t\tconst err2 = new Error(\"BANG!\");\n\t\t\tawait expect(\n\t\t\t\tFunPromise.resolve([Promise.reject(err1), Promise.reject(err2)])\n\t\t\t\t\t.wrapErrors(\"ERRORS!\")\n\t\t\t\t\t.catch((e) => {\n\t\t\t\t\t\texpect(e).toBeInstanceOf(NestedError);\n\t\t\t\t\t\texpect(e).toHaveProperty(\"message\", \"ERRORS!\");\n\t\t\t\t\t\texpect(e.innerErrors).toHaveLength(2);\n\t\t\t\t\t\texpect(e.innerErrors).toEqual([err1, err2]);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t})\n\t\t\t).resolves.toBe(true);\n\t\t});\n\n\t\tit(\"doesn't do anything if there is no error\", async () => {\n\t\t\tconst values = [1, 2, 3, true, false, null, undefined];\n\t\t\tawait expect(\n\t\t\t\tFunPromise.resolve(values).wrapErrors(\"ERRORS!\")\n\t\t\t).resolves.toEqual(values);\n\t\t});\n\t});\n\n\tdescribe(\"cancellation\", () => {\n\t\tit(\"initially reports not cancelled\", () => {\n\t\t\texpect(FunPromise.resolve(true).isCancelled()).toBe(false);\n\t\t});\n\n\t\tit(\"reports cancelled after cancel is called\", () => {\n\t\t\texpect(FunPromise.resolve(true).cancel().isCancelled()).toBe(true);\n\t\t});\n\n\t\tit(\"prevents resolution after cancellation\", () => {\n\t\t\tlet resolver;\n\t\t\tlet sawResolve = false;\n\t\t\tconst promise = new Promise((resolve) => {\n\t\t\t\tresolver = resolve;\n\t\t\t}).then(() => {\n\t\t\t\tsawResolve = true;\n\t\t\t});\n\t\t\texpect(resolver).not.toBeNil();\n\t\t\tconst cancelled = new FunPromise(promise).cancel();\n\t\t\tresolver(true);\n\t\t\texpect(sawResolve).toBe(false);\n\t\t});\n\n\t\tit(\"prevents rejection after cancellation\", () => {\n\t\t\tlet rejector;\n\t\t\tlet sawReject = false;\n\t\t\tconst promise = new Promise((resolve, reject) => {\n\t\t\t\trejector = reject;\n\t\t\t}).catch(() => {\n\t\t\t\tsawReject = true;\n\t\t\t});\n\t\t\texpect(rejector).not.toBeNil();\n\t\t\tconst cancelled = new FunPromise(promise).cancel();\n\t\t\trejector(\"BOOM!\");\n\t\t\texpect(sawReject).toBe(false);\n\t\t});\n\n\t\tit(\"prevents rejection when resolving throws after cancellation\", () => {\n\t\t\tlet resolver;\n\t\t\tlet sawThen = true;\n\t\t\tlet sawCatch = false;\n\t\t\tlet doCancel;\n\t\t\tconst promise = new Promise((resolve) => {\n\t\t\t\tresolver = resolve;\n\t\t\t}).then(() => {\n\t\t\t\tsawThen = true;\n\t\t\t\tdoCancel();\n\t\t\t\tthrow \"BOOM!\";\n\t\t\t});\n\t\t\texpect(resolver).not.toBeNil();\n\t\t\tconst toCancel = new FunPromise(promise);\n\t\t\tdoCancel = () => {\n\t\t\t\ttoCancel.cancel();\n\t\t\t};\n\t\t\ttoCancel.catch((e) => {\n\t\t\t\tsawCatch = true;\n\t\t\t});\n\t\t\tresolver(true);\n\t\t\texpect(sawThen).toBe(true);\n\t\t\texpect(sawCatch).toBe(false);\n\t\t});\n\t});\n\n\tdescribe(\"simplifyAll\", () => {\n\t\tit(\"basically works\", async () => {\n\t\t\tawait expect(FunPromise.resolve(\"Hello\").simplifyAll()).resolves.toEqual([\n\t\t\t\t\"H\",\n\t\t\t\t\"e\",\n\t\t\t\t\"l\",\n\t\t\t\t\"l\",\n\t\t\t\t\"o\",\n\t\t\t]);\n\t\t});\n\n\t\tit(\"doesn't explode on an empty list\", async () => {\n\t\t\tawait expect(FunPromise.resolve([]).simplifyAll()).resolves.toEqual([]);\n\t\t});\n\t});\n\n\tdescribe(\"settle\", () => {\n\t\tit(\"basically works for rejections\", async () => {\n\t\t\tawait expect(FunPromise.reject(\"BOOM!\").settle()).resolves.toHaveProperty(\n\t\t\t\t\"reason\",\n\t\t\t\t\"BOOM!\"\n\t\t\t);\n\t\t});\n\n\t\tit(\"basically works for fulfillments\", async () => {\n\t\t\tawait expect(FunPromise.resolve(true).settle()).resolves.toHaveProperty(\n\t\t\t\t\"value\",\n\t\t\t\ttrue\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe(\"settleAll\", () => {\n\t\t_.forEach([true, false], (staticVersion) => {\n\t\t\tdescribe(staticVersion ? \"static\" : \"instance\", () => {\n\t\t\t\tfunction doSettleAll(values) {\n\t\t\t\t\tif (staticVersion) {\n\t\t\t\t\t\treturn FunPromise.settleAll(values);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn FunPromise.resolve(values).settleAll();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tit(\"basically works\", async () => {\n\t\t\t\t\tconst values = [\n\t\t\t\t\t\t{ in: Promise.resolve(true), out: new Fulfillment(true) },\n\t\t\t\t\t\t{ in: Promise.reject(\"BOOM!\"), out: new Rejection(\"BOOM!\") },\n\t\t\t\t\t\t{ in: Promise.reject(null), out: new Rejection(null) },\n\t\t\t\t\t\t{ in: null, out: new Fulfillment(null) },\n\t\t\t\t\t];\n\t\t\t\t\tawait expect(doSettleAll(_.map(values, \"in\"))).resolves.toEqual(\n\t\t\t\t\t\t_.map(values, \"out\")\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\t\tit(\"doesn't explode on empty lists\", async () => {\n\t\t\t\t\tawait expect(doSettleAll([])).resolves.toEqual([]);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n});\n"]}